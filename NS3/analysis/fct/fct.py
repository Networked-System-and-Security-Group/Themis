DCQCN_30_intra_ratio_low = 6.438281705551057
DCQCN_30_intra_ratio_middle = 5.345057226689925
DCQCN_30_intra_ratio_high = 4.69150766306648
DCQCN_30_inter_ratio_low = 1.040375727556413
DCQCN_30_inter_ratio_middle = 1.0542629760195104
DCQCN_30_inter_ratio_high = 1.268751387640969

Themis_30_intra_ratio_low = 2.0287323697164497
Themis_30_intra_ratio_middle = 2.2963213572227725
Themis_30_intra_ratio_high = 3.8460292512211565
Themis_30_inter_ratio_low = 1.0151198374317079
Themis_30_inter_ratio_middle = 1.028829743900549
Themis_30_inter_ratio_high = 1.4591261924673031

Annulus_30_intra_ratio_low = 3.960338676031244
Annulus_30_intra_ratio_middle = 3.2162747791868145
Annulus_30_intra_ratio_high = 4.6201995159927
Annulus_30_inter_ratio_low = 1.016342586246749
Annulus_30_inter_ratio_middle = 1.026313112851951
Annulus_30_inter_ratio_high = 1.2494557949301994

DCQCN_short_30_intra_ratio_low =  2.461652189930469
DCQCN_short_30_intra_ratio_middle = 2.2939776852394176
DCQCN_short_30_intra_ratio_high = 3.6785985915165673
DCQCN_short_30_inter_ratio_low = 1.8620479563886023
DCQCN_short_30_inter_ratio_middle = 1.8807404006848563
DCQCN_short_30_inter_ratio_high = 3.7395751825417936

BiCC_30_intra_ratio_low = 5.001895967406519
BiCC_30_intra_ratio_middle = 4.115401283934346
BiCC_30_intra_ratio_high = 2.8322662133866654
BiCC_30_inter_ratio_low = 1.0256734071647993
BiCC_30_inter_ratio_middle = 1.0429765885088274
BiCC_30_inter_ratio_high = 11.52017437540345

DCQCN_50_intra_ratio_low = 26.431902029595992
DCQCN_50_intra_ratio_middle = 16.72675283484652
DCQCN_50_intra_ratio_high = 7.818149751582428
DCQCN_50_inter_ratio_low = 1.2188536628781217
DCQCN_50_inter_ratio_middle = 1.2354019147728892
DCQCN_50_inter_ratio_high = 1.7270575373450157

Themis_50_intra_ratio_low =  2.5211076647398016
Themis_50_intra_ratio_middle = 2.5036538730841538
Themis_50_intra_ratio_high = 4.750995318022391
Themis_50_inter_ratio_low = 1.1963768415355698
Themis_50_inter_ratio_middle = 1.1425120455460498
Themis_50_inter_ratio_high = 2.9656259620196805

Annulus_50_intra_ratio_low = 9.26055799917608
Annulus_50_intra_ratio_middle = 6.97323498640816
Annulus_50_intra_ratio_high = 7.356852638499706
Annulus_50_inter_ratio_low = 1.0591187044212111
Annulus_50_inter_ratio_middle = 1.0746205806658808
Annulus_50_inter_ratio_high = 1.5652790713028273

DCQCN_short_50_intra_ratio_low = 5.616143681809201
DCQCN_short_50_intra_ratio_middle = 4.8631128836000865
DCQCN_short_50_intra_ratio_high = 5.786398374712096
DCQCN_short_50_inter_ratio_low = 3.568926553543679
DCQCN_short_50_inter_ratio_middle = 3.621165122235561
DCQCN_short_50_inter_ratio_high = 6.166094034089961

BiCC_50_intra_ratio_low = 9.97161137695392
BiCC_50_intra_ratio_middle = 8.075623199739702
BiCC_50_intra_ratio_high = 4.2459013961617424
BiCC_50_inter_ratio_low = 1.0855717559277438
BiCC_50_inter_ratio_middle = 1.1074125277914348
BiCC_50_inter_ratio_high = 14.707059573157165

DCQCN_70_intra_ratio_low = 39.05348933680264
DCQCN_70_intra_ratio_middle =  30.263963757799743
DCQCN_70_intra_ratio_high = 12.64354645813918
DCQCN_70_inter_ratio_low =  1.4574436369415495
DCQCN_70_inter_ratio_middle = 1.4597168356351942
DCQCN_70_inter_ratio_high = 2.267442604440677

Themis_70_intra_ratio_low = 3.712988871643665
Themis_70_intra_ratio_middle = 3.4324599155963478
Themis_70_intra_ratio_high = 7.167877767299762
Themis_70_inter_ratio_low = 2.276725278420532
Themis_70_inter_ratio_middle = 2.250712231933719
Themis_70_inter_ratio_high = 6.481470322529248

Annulus_70_intra_ratio_low = 15.605269565584246
Annulus_70_intra_ratio_middle = 12.437109393843384
Annulus_70_intra_ratio_high = 13.749605829433548
Annulus_70_inter_ratio_low = 1.171556358760208
Annulus_70_inter_ratio_middle = 1.1742949632650819
Annulus_70_inter_ratio_high = 1.8871249352816588

DCQCN_short_70_intra_ratio_low = 12.626405923337256
DCQCN_short_70_intra_ratio_middle = 9.368472262807202
DCQCN_short_70_intra_ratio_high = 9.52063679871591
DCQCN_short_70_inter_ratio_low = 8.34777365896573
DCQCN_short_70_inter_ratio_middle = 7.208807339885079
DCQCN_short_70_inter_ratio_high = 10.006080079681794

BiCC_70_intra_ratio_low = 16.46529810023472
BiCC_70_intra_ratio_middle = 13.860800712963812
BiCC_70_intra_ratio_high = 6.822681882435995
BiCC_70_inter_ratio_low = 1.170817703788648
BiCC_70_inter_ratio_middle = 1.2009360625112977
BiCC_70_inter_ratio_high = 12.658215652084406

import matplotlib.pyplot as plt
import numpy as np
import matplotlib.ticker as ticker
plt.rcParams.update({'font.size': 38})
# 数据
labels = ['30%', '50%', '70%']
schemes = ['DCQCN', 'Themis', 'Annulus', 'BiCC', 'DCQCN_short']
hatches = ['' '', '', '']  # 填充样式

# 从全局变量中读取数据
data = {
    'low': {
        'intra': [
            [DCQCN_30_intra_ratio_low, Themis_30_intra_ratio_low, Annulus_30_intra_ratio_low, BiCC_30_intra_ratio_low, DCQCN_short_30_intra_ratio_low],
            [DCQCN_50_intra_ratio_low, Themis_50_intra_ratio_low, Annulus_50_intra_ratio_low, BiCC_50_intra_ratio_low, DCQCN_short_50_intra_ratio_low],
            [DCQCN_70_intra_ratio_low, Themis_70_intra_ratio_low, Annulus_70_intra_ratio_low, BiCC_70_intra_ratio_low, DCQCN_short_70_intra_ratio_low]
        ],
        'inter': [
            [DCQCN_30_inter_ratio_low, Themis_30_inter_ratio_low, Annulus_30_inter_ratio_low, BiCC_30_inter_ratio_low, DCQCN_short_30_inter_ratio_low],
            [DCQCN_50_inter_ratio_low, Themis_50_inter_ratio_low, Annulus_50_inter_ratio_low, BiCC_50_inter_ratio_low, DCQCN_short_50_inter_ratio_low],
            [DCQCN_70_inter_ratio_low, Themis_70_inter_ratio_low, Annulus_70_inter_ratio_low, BiCC_70_inter_ratio_low, DCQCN_short_70_inter_ratio_low]
        ]
    },
    'middle': {
        'intra': [
            [DCQCN_30_intra_ratio_middle, Themis_30_intra_ratio_middle, Annulus_30_intra_ratio_middle, BiCC_30_intra_ratio_middle, DCQCN_short_30_intra_ratio_middle],
            [DCQCN_50_intra_ratio_middle, Themis_50_intra_ratio_middle, Annulus_50_intra_ratio_middle, BiCC_50_intra_ratio_middle, DCQCN_short_50_intra_ratio_middle],
            [DCQCN_70_intra_ratio_middle, Themis_70_intra_ratio_middle, Annulus_70_intra_ratio_middle, BiCC_70_intra_ratio_middle, DCQCN_short_70_intra_ratio_middle]
        ],
        'inter': [
            [DCQCN_30_inter_ratio_middle, Themis_30_inter_ratio_middle, Annulus_30_inter_ratio_middle, BiCC_30_inter_ratio_middle, DCQCN_short_30_inter_ratio_middle],
            [DCQCN_50_inter_ratio_middle, Themis_50_inter_ratio_middle, Annulus_50_inter_ratio_middle, BiCC_50_inter_ratio_middle, DCQCN_short_50_inter_ratio_middle],
            [DCQCN_70_inter_ratio_middle, Themis_70_inter_ratio_middle, Annulus_70_inter_ratio_middle, BiCC_70_inter_ratio_middle, DCQCN_short_70_inter_ratio_middle]
        ]
    },
    'high': {
        'intra': [
            [DCQCN_30_intra_ratio_high, Themis_30_intra_ratio_high, Annulus_30_intra_ratio_high, BiCC_30_intra_ratio_high, DCQCN_short_30_intra_ratio_high],
            [DCQCN_50_intra_ratio_high, Themis_50_intra_ratio_high, Annulus_50_intra_ratio_high, BiCC_50_intra_ratio_high, DCQCN_short_50_intra_ratio_high],
            [DCQCN_70_intra_ratio_high, Themis_70_intra_ratio_high, Annulus_70_intra_ratio_high, BiCC_70_intra_ratio_high, DCQCN_short_70_intra_ratio_high]
        ],
        'inter': [
            [DCQCN_30_inter_ratio_high, Themis_30_inter_ratio_high, Annulus_30_inter_ratio_high, BiCC_30_inter_ratio_high, DCQCN_short_30_inter_ratio_high],
            [DCQCN_50_inter_ratio_high, Themis_50_inter_ratio_high, Annulus_50_inter_ratio_high, BiCC_50_inter_ratio_high, DCQCN_short_50_inter_ratio_high],
            [DCQCN_70_inter_ratio_high, Themis_70_inter_ratio_high, Annulus_70_inter_ratio_high, BiCC_70_inter_ratio_high, DCQCN_short_70_inter_ratio_high]
        ]
    }
}

# 计算每个负载类型的最大值
max_values = {
    'low': max(np.max(data['low']['intra']), np.max(data['low']['inter'])),
    'middle': max(np.max(data['middle']['intra']), np.max(data['middle']['inter'])),
    'high': max(np.max(data['high']['intra']), np.max(data['high']['inter']))
}
max_value = max(max_values.values())

# 绘制柱状图
for load in ['low', 'middle', 'high']:
    for flow_type in ['intra', 'inter']:
        fig, ax = plt.subplots(figsize=(10, 6))
        values = np.array(data[load][flow_type])
        bar_width = 0.18
        index = np.arange(len(labels))
        
        for k, scheme in enumerate(schemes):
            if scheme == 'DCQCN':
                color = '#D15354'
                hatch = ''
            elif scheme == 'Themis':
                color = '#3DA6AE'
                hatch = ''
            elif scheme == 'Annulus':
                color = '#E8B86C'
                hatch = ''
            elif scheme == 'DCQCN_short':
                color = '#C6E3C6'
                hatch = ''
            else:
                color = '#BEB8DC'
                hatch = ''
            
            ax.bar(index + k * bar_width, values[:, k], bar_width, label=scheme, hatch=hatch, color=color, edgecolor='black')
        
        ax.set_xlabel('Load')
        ax.set_ylabel('Normalized FCT')
        ax.set_xticks(index + bar_width * (len(schemes) - 1) / 2)
        ax.set_xticklabels(labels)
        ax.grid(True)
        
        # 设置统一的y轴范围
        ax.set_ylim(0, max_value+1)
        ax.yaxis.set_major_locator(ticker.MultipleLocator(5))
        ax.yaxis.set_major_formatter(ticker.ScalarFormatter())
        ax.grid(True, which='major', linestyle='dashed', linewidth=0.5)
        # 保存图表到文件
        plt.savefig(f'./webSearch_1_1_{load}_{flow_type}.pdf', bbox_inches='tight')
fig_legend, ax_legend = plt.subplots(figsize=(10, 1))
ax_legend.axis('off')  # 隐藏坐标轴
handles, labels = ax.get_legend_handles_labels()
plt.rcParams.update({'font.size': 42})
fig_legend.legend(handles, labels, loc='center', ncol=5,)  # 横着展示为一排
plt.savefig('legend.pdf', bbox_inches='tight')